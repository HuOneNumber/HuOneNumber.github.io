<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="HTML,CSS,JavaScript">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="胡倚豪">
    
    <title>
        
            02-应用层 |
        
        HuOneNumber | 个人博客
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/avatar.png">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#33FFCC","avatar":"/images/avatar.png","favicon":"/images/avatar.png","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"description":"慢慢来，深几度。。。","background_img":"/images/bg.svg"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"trigger":"auto","unescape":false,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="别着急，慢慢来" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                HuOneNumber | 个人博客
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">02-应用层</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">胡倚豪</span>
                        
                            <span class="author-label">Lv4</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-05-10 10:36:52
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%9A%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95/">计算机网络：自顶向下方法</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Computer-Network/">Computer Network</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>3.6k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>12 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h2 id="2-1-应用层协议原理"><a href="#2-1-应用层协议原理" class="headerlink" title="2.1   应用层协议原理"></a>2.1   应用层协议原理</h2><h3 id="2-1-1-网络应用程序体系结构"><a href="#2-1-1-网络应用程序体系结构" class="headerlink" title="2.1.1   网络应用程序体系结构"></a>2.1.1   网络应用程序体系结构</h3><p>网络体系结构为应用程序提供了特定的服务集，规定了如何在各种端系统上组织该应用程序。两种主流体系结构：客户—服务器体系结构和对等（<code>P2P</code>）体系结构。</p>
<p>客户一服务器体系结构：有一个总是打开的主机称为服务器，服务于来自许多其他称为客户的主机的请求。例如Web应用。</p>
<p><code>P2P</code>体系结构：对位于数据中心的专用服务器有最小甚至没有依赖，应用程序在间断连接的主机对之间直接通信，这些主机对被称为对等方。例如文件共享、迅雷、电话和视频会议。</p>
<p>某些应用具有混合的体系结构。例如，对于即时讯息应用，服务器被用于跟踪用户的<code>IP</code>地址，但可在用户主机之间直接发送报文。</p>
<h3 id="2-1-2-进程通信"><a href="#2-1-2-进程通信" class="headerlink" title="2.1.2   进程通信"></a>2.1.2   进程通信</h3><p>进行通信的实际上是进程而不是程序，是运行在端系统中的一个程序。进程间通信的规则由端系统上的操作系统确定。在两个不同端系统上的进程，通过交换报文而相互通信。</p>
<h4 id="2-1-2-1-客户和服务器进程"><a href="#2-1-2-1-客户和服务器进程" class="headerlink" title="2.1.2.1   客户和服务器进程"></a>2.1.2.1   客户和服务器进程</h4><p>网络应用程序由成对的进程组成，发起通信的进程被标识为客户，在会话开始时等待联系的进程是服务器。</p>
<p>在Web中，浏览器进程是客户，Web服务器进程是服务器。在<code>P2P</code>文件共享中，当对等方A请求对等方B发送一个特定的文件时对等方A是客户，而对等方B是服务器，而一个进程能够既是客户又是服务器。</p>
<h4 id="2-1-2-2-进程与计算机网络之间的接口"><a href="#2-1-2-2-进程与计算机网络之间的接口" class="headerlink" title="2.1.2.2   进程与计算机网络之间的接口"></a>2.1.2.2   进程与计算机网络之间的接口</h4><p>进程通过套接字接口向网络发送和接收报文。套接字是主机内应用层与运输层之间的接口。应用程序开发者可以控制套接字在应用层端的一切，但是对该套接字的运输层端几乎没有控制权。应用程序开发者对于运输层的控制仅限于：1. 选择运输层协议；2. 设定几个运输层参数，如最大缓存和最大报文段长度等。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/13/OgkYyHpXEqRes5W.png"
                      alt="image-20210513112006886"
                ></p>
<h3 id="2-1-3-因特网提供的运输服务"><a href="#2-1-3-因特网提供的运输服务" class="headerlink" title="2.1.3   因特网提供的运输服务"></a>2.1.3   因特网提供的运输服务</h3><p>因特网为应用程序提供两个运输层协议，<code>UDP</code>和<code>TCP</code>，每个协议为调用它们的应用程序提供了不同的服务集合。</p>
<p>TCP服务模型包括<strong>面向连接服务</strong>和<strong>可靠数据传输服务</strong>。</p>
<p><code>UDP</code>是一种不提供不必要服务的轻量级运输协议，它仅提供最小服务。<code>UDP</code>是无连接的，因此在两个进程通信前没有握手过程。<code>UDP</code>协议提供一种不可靠数据传送服务，到达接收进程的报文也可能是乱序到达的。<code>UDP</code>没有包括拥塞控制机制，所以<code>UDP</code>的发送端可以用它选定的任何速率向其网络层注入数据。</p>
<h4 id="2-1-4-3-TCP安全"><a href="#2-1-4-3-TCP安全" class="headerlink" title="2.1.4.3  TCP安全"></a>2.1.4.3  TCP安全</h4><p>无论TCP还是<code>UDP</code>都没有提供任何加密机制，所以研制了TCP的加强版本，安全套接字（<code>SSL</code>），提供了关键的进程到进程的安全性服务，包括加密、数据完整性和端点鉴别。</p>
<p><code>SSL</code>对TCP的加强是在应用层上实现的。<code>SSL</code>有自己的套接字<code>API</code>，发送进程向<code>SSL</code>套接字传递明文数据,，<code>SSL</code>加密该数据并将加密的数据传递给TCP套接字。加密的数据经因特网传送到接收进程中的TCP套接字，该接收套接字将加密数据传递给<code>SSL</code>，由其进行解密，最后通过它的<code>SSL</code>套接字将明文数据传递给接收进程。</p>
<h3 id="2-1-4-应用层协议"><a href="#2-1-4-应用层协议" class="headerlink" title="2.1.4   应用层协议"></a>2.1.4   应用层协议</h3><p>应用层协议定义了运行在不同端系统上的应用程序进程如何相互传递报文。<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/13/SldDW6VtFnbkXEi.png"
                      alt="image-20210513203552242"
                ></p>
<h2 id="2-2-Web和HTTP"><a href="#2-2-Web和HTTP" class="headerlink" title="2.2   Web和HTTP"></a>2.2   Web和HTTP</h2><h3 id="2-2-1-HTTP概况"><a href="#2-2-1-HTTP概况" class="headerlink" title="2.2.1   HTTP概况"></a>2.2.1   HTTP概况</h3><p>Web的应用层协议是超文本传输协议（HTTP）。HTTP由两个程序实现：一个客户程序和一个服务器程序，通过交换HTTP报文进行会话。</p>
<p>HTTP使用TCP作为它的支撑运输协议，HTTP客户首先发起一个与服务器的TCP连接。一旦连接建立，该浏览器和服务器进程就可以通过套接字接口访问ТСР。客户向它的套接字接口发送HTTP请求报文并从它的套接字接口接收HTTP响应报文。一旦客户向它的套接字接口发送了一个请求报文，该报文就脱离了客户控制并进入TCP的控制。</p>
<p>服务器向客户发送被请求的文件，而不存储任何关于该客户的状态信息。假如某个特定的客户在短短的几秒内两次请求同一个对象，服务器会重新发送该对象，所以我们说HTTP是一个无状态协议。</p>
<h3 id="2-2-2-非持续连接和持续连接"><a href="#2-2-2-非持续连接和持续连接" class="headerlink" title="2.2.2   非持续连接和持续连接"></a>2.2.2   非持续连接和持续连接</h3><p>非持续连接：每个请求/响应对是经一个单独的TCP连接发送，用户能够配置浏览器来控制连接的并行度。大部分浏览器默认打开5~10个并行的TCP连接，每条连接只处理一个请求响应事务。</p>
<p>往返时间（<code>RTT</code>）：一个短分组从客户到服务器然后再返回客户所花费的时间。<code>RTT</code>包括分组传播时延、分组排队时延以及分组处理时延。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/13/XjhdIJ1s74gtaoG.png"
                      alt="image-20210513213831777"
                ></p>
<p>缺点：1. 必须为每一个请求的对象建立和维护一个新的连接，在客户和服务器中都要分配每个TCP的缓冲区和保持TCP变量。2. 每一个对象经受两倍<code>RTT</code>的交付时延，一个<code>RTT</code>用于创建TCP，另一个<code>RTT</code>用于请求和接收一个对象。</p>
<p>持续连接：所有的请求及其响应经相同的TCP连接发送呢。HTTP在其默认方式下使用持续连接。</p>
<h3 id="2-2-3-用户与服务器的交互：cookie"><a href="#2-2-3-用户与服务器的交互：cookie" class="headerlink" title="2.2.3   用户与服务器的交互：cookie"></a>2.2.3   用户与服务器的交互：cookie</h3><p>cookie允许站点对用户进行跟踪，用于标识一个用户。用户首次访问一个站点时提供一个用户标识，在后继会话中，浏览器向服务器传递一个cookie首部，从而向该服务器标识了用户。因此cookie可以在无状态的HTTP之上建立一个用户会话层。cookie技术有4个组件：</p>
<ol>
<li>在HTTP响应报文中的一个cookie首部行；</li>
<li>在HTTP请求报文中的一个cookie首部行；</li>
<li>在用户端系统中保留有一个cookie文件，并由用户的浏览器进行管理；</li>
<li>位于Web站点的一个后端数据库。</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/13/J296joUDX5hSVfn.png"
                      alt="image-20210513214554431"
                ></p>
<h3 id="2-2-4-Web缓存"><a href="#2-2-4-Web缓存" class="headerlink" title="2.2.4   Web缓存"></a>2.2.4   Web缓存</h3><p>Web缓存器也叫代理服务器，在存储空间中保存最近请求过的对象的副本。可以配置用户的浏览器，使得用户的所有HTTP请求首先指向Web缓存器。</p>
<h2 id="2-3-电子邮件"><a href="#2-3-电子邮件" class="headerlink" title="2.3  电子邮件"></a>2.3  电子邮件</h2><p>电子邮件系统有3个主要组成部分：</p>
<ol>
<li><p>用户代理</p>
<p>用户代理允许用户阅读、回复、转发、保存和撰写报文。比如<code>QQ</code>邮箱向其邮件服务器发送和获取邮件。</p>
</li>
<li><p>邮件服务器</p>
<p>每个接收方在其中的某个邮件服务器上有一个邮箱，管理和维护发送的报文。</p>
</li>
<li><p>简单邮件传输协议（SMTP）。</p>
<p>SMTP是电子邮件中主要的应用层协议，使用TCP可靠数据传输服务，从发送方的邮件服务器向接收方的邮件服务器发送邮件。每台邮件服务器上既运行SMTP的客户端也运行SMTP的服务器端。</p>
</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/13/PSsoeu3xQLARtIl.png"
                      alt="image-20210513223105286"
                ></p>
<h3 id="2-3-2-与HTTP的对比"><a href="#2-3-2-与HTTP的对比" class="headerlink" title="2.3.2 与HTTP的对比"></a>2.3.2 与HTTP的对比</h3><ul>
<li>HTTP主要是一个<strong>拉协议</strong>，用户使用HTTP从服务器拉取应用层信息。SMTP是一个<strong>推协议</strong>，即发送邮件服务器把文件推向接收邮件服务器。</li>
<li>SMTP要求每个报文采用7比特<code>ASCI</code>码格式，否则该报文按照7比特<code>ASCI</code>码进行编码。HTTP数据不受限制。</li>
<li>HTTP把每个对象封装到它自己的HTTP响应报文中，而SMTP则把所有报文对象放在一个报文之中。</li>
</ul>
<h2 id="2-4-DNS：因特网的目录服务"><a href="#2-4-DNS：因特网的目录服务" class="headerlink" title="2.4   DNS：因特网的目录服务"></a>2.4   <code>DNS</code>：因特网的目录服务</h2><h3 id="2-4-1-DNS提供的服务"><a href="#2-4-1-DNS提供的服务" class="headerlink" title="2.4.1   DNS提供的服务"></a>2.4.1   <code>DNS</code>提供的服务</h3><p><code>DNS</code>是：1. 由分层的<code>DNS</code>服务器实现的分布式数据库；2.使主机能够查询分布式数据库的应用层协议。<code>DNS</code>服务器通常是运行BIND软件的UNIX机器。<code>DNS</code>还提供了一些重要的服务：</p>
<ol>
<li><p>主机别名</p>
<p>有着复杂主机名的主机能拥有一个或者多个别名。应用程序可以调用<code>DNS</code>来获得主机别名对应的规范主机名以及主机的<code>IP</code>地址。</p>
</li>
<li><p>邮件服务器别名</p>
<p>电子邮件应用程序可以调用<code>DNS</code>，对提供的主机名别名进行解析，以获得该主机的规范主机名及其<code>IP</code>地址。</p>
</li>
<li><p>负载分配</p>
<p><code>DNS</code>数据库中存储与同一个规范主机名相联系的<code>IP</code>地址集合，当客户对映射到某地址集合的名字发出一个<code>DNS</code>请求时，该服务器用<code>IP</code>地址的整个集合进行响应，但在每个回答中循环这些地址次序，所以<code>DNS</code>就在冗余的Web服务器之间循环分配了负载。</p>
</li>
</ol>
<h3 id="2-4-2-DNS工作机理概述"><a href="#2-4-2-DNS工作机理概述" class="headerlink" title="2.4.2   DNS工作机理概述"></a>2.4.2   <code>DNS</code>工作机理概述</h3><p><code>DNS</code>工作过程的总体概括：</p>
<ol>
<li>当主机上的应用程序需要将主机名转换为<code>IP</code>地址时，调用主机上的<code>DNS</code>的客户端，指明需要被转换的主机名</li>
<li><code>DNS</code>客户端接收后向<code>DNS</code>服务器发送<code>DNS</code>查询报文，<code>DNS</code>请求和回答报文使用<code>UDP</code>数据报经端口53发送</li>
<li><code>DNS</code>客户端接收到包含<code>IP</code>地址的<code>DNS</code>回答报文，然后传递到调用<code>DNS</code>的应用程序</li>
</ol>
<h4 id="2-4-2-1-分布式、层次数据库"><a href="#2-4-2-1-分布式、层次数据库" class="headerlink" title="2.4.2.1   分布式、层次数据库"></a>2.4.2.1   分布式、层次数据库</h4><p><code>DNS</code>服务器层次方式组织，有3种类型的<code>DNS</code>服务器：</p>
<ul>
<li>根<code>DNS</code>服务器，提供<code>TLD</code>服务器的<code>IP</code>地址。</li>
<li>顶级域<code>DNS</code>服务器（<code>TLD</code>服务器），提供了权威<code>DNS</code>服务器的<code>IP</code>地址。</li>
<li>权威<code>DNS</code>服务器，具有公共可访问主机（如Web服务器和邮件服务器）的每个组织机构或交由服务提供商的权威<code>DNS</code>服务器收藏和提供公共可访问这些<code>DNS</code>记录。<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/18/kqsQnGf149gHYpx.png"
                      alt="image-20210518193538282"
                ></li>
</ul>
<p>还有另一类重要的<code>DNS</code>服务器，本地<code>DNS</code>服务器。主机的本地<code>DNS</code>服务器通常“邻近”主机，它起着代理的作用将该请求转发到<code>DNS</code>服务器层次结构中。实际上过程比下图更复杂，因为通常<code>TLD</code>服务器只是知道中间的某个<code>DNS</code>服务器，该中间<code>DNS</code>服务器依次才能知道用于该主机的权威<code>DNS</code>服务器。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/18/3QZbqu7FHMi9NdA.png"
                      alt="image-20210518202037321"
                ></p>
<p>上图利用了<strong>递归查询</strong>和<strong>迭代查询</strong>。从理论上讲，任何<code>DNS</code>查询既可以是迭代的也能是递归的。但实践中查询通常遵循的模式是：从请求主机到本地<code>DNS</code>服务器的查询是递归的，其余的查询是迭代的。</p>
<h4 id="2-4-2-2-DNS缓存"><a href="#2-4-2-2-DNS缓存" class="headerlink" title="2.4.2.2   DNS缓存"></a>2.4.2.2   <code>DNS</code>缓存</h4><p>为了改善时延性能并减少<code>DNS</code>报文数量，<code>DNS</code>服务器接收一个<code>DNS</code>回答时能将映射缓存在本地存储器中，因此本地<code>DNS</code>服务器也能够缓存<code>TLD</code>服务器的<code>IP</code>地址，从而允许本地<code>DNS</code>绕过根<code>DNS</code>服务器。但由于主机和主机名与<code>IP</code>地址间的映射并不永久，<code>DNS</code>服务器在一段时间后（通常设置为两天）将丢弃缓存的信息。</p>
<h3 id="2-4-3-DNS记录和报文"><a href="#2-4-3-DNS记录和报文" class="headerlink" title="2.4.3   DNS记录和报文"></a>2.4.3   <code>DNS</code>记录和报文</h3><p>共同实现<code>DNS</code>分布式数据库的所有<code>DNS</code>服务器存储了资源记录（RR），RR提供了主机名到<code>IP</code>地址的映射。<br>资源记录是一个包含了下列字段的4元组：（Name，Value，Tурe，TTL）</p>
<p>TTL是该记录的生存时间，它决定了资源记录应当从缓存中删除的时间。Name和Value的值取决于Type：</p>
<ul>
<li>如果Type =<code>A</code>，则Name是主机名，Value是该主机名对应的<code>IP</code>地址。提供了标准的主机名到<code>IP</code>地址的映射。</li>
<li>如果Type =<code>NS</code>，则Name是个域，Value只是能获得该域中主机<code>IP</code>地址的权威<code>DNS</code>服务器的主机名。这个记录用于沿着查询链来路由<code>DNS</code>查询。</li>
<li>如果Type =<code> CNAME</code>，则Value是别名为Name的主机对应的规范主机名。该记录能够向查询的主机提供一个主机名对应的规范主机名。</li>
<li>如果Type =<code>MX</code>，则Value是个别名为Name的邮件服务器的规范主机名。</li>
</ul>
<h2 id="2-5-内容分发网络"><a href="#2-5-内容分发网络" class="headerlink" title="2.5   内容分发网络"></a>2.5   内容分发网络</h2><p><code>CDN</code>管理分布在多个地理位置上的服务器，在服务器中存储内容的副本，并且所有试图将每个用户请求定向到一个将提供最好的用户体验的<code>CDN</code>位置。<code>CDN</code>可以是专用<code>CDN</code>，即由内容提供商自己所拥有。另一种是第三方<code>CDN</code>。</p>
<p><code>CDN</code>通常采用两种不同的服务器安置原则</p>
<ul>
<li>深入。该原则是通过在接入<code>ISP</code>中部署服务器集群来深入到<code>ISP</code>的接入网中。其目标是靠近端用户，通过减少端用户和<code>CDN</code>集群之间链路和路由器的数量，从而改善了用户感受的时延和吞吐量。</li>
<li>邀请做客。该原则是通过在少量关键位置（通常是<code>IXP</code>）建造大集群来邀请到<code>ISP</code>做客。与深人设计原则相比，邀请做客设计通常产生较低的维护和管理开销，但可能以对端用户的较高时延和较低吞吐量为代价。</li>
</ul>
<p>一旦<code>CDN</code>的集群准备就绪，它就可以跨集群复制内容。如果客户向一个未存储该内容的集群请求，则该集群检索该内容，向客户流式传输内容的同时在本地存储一个副本。类似于因特网缓存，会删除不经常请求的内容。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.loli.net/2021/05/18/lSiuCAEzgyfxajH.png"
                      alt="image-20210518214333982"
                ></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：02-应用层</li>
        <li>本文作者：胡倚豪</li>
        <li>创建时间：2021-05-10 10:36:52</li>
        <li>
            本文链接：huonenumber.github.io/2021/05/10/note/Computer Networking/02-应用层/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/05/19/note/Computer%20Networking/03-%E8%BF%90%E8%BE%93%E5%B1%82/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">03-运输层</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/05/09/note/Computer%20Networking/01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">01-计算机网络和因特网</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;评论</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'oRtabIpmHUsCjAVoocAuRiR6-gzGzoHsz',
                    appKey: '8MQB6tSReJAP6eYmI5OGVpTo',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '请尽情吐槽吧~',
                    lang: 'zh-CN'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = '胡倚豪';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">胡倚豪</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.3</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86"><span class="nav-text">2.1   应用层协议原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-text">2.1.1   网络应用程序体系结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="nav-text">2.1.2   进程通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2-1-%E5%AE%A2%E6%88%B7%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E7%A8%8B"><span class="nav-text">2.1.2.1   客户和服务器进程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2-2-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E9%97%B4%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="nav-text">2.1.2.2   进程与计算机网络之间的接口</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8F%90%E4%BE%9B%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1"><span class="nav-text">2.1.3   因特网提供的运输服务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-4-3-TCP%E5%AE%89%E5%85%A8"><span class="nav-text">2.1.4.3  TCP安全</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-4-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="nav-text">2.1.4   应用层协议</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Web%E5%92%8CHTTP"><span class="nav-text">2.2   Web和HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-HTTP%E6%A6%82%E5%86%B5"><span class="nav-text">2.2.1   HTTP概况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5"><span class="nav-text">2.2.2   非持续连接和持续连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92%EF%BC%9Acookie"><span class="nav-text">2.2.3   用户与服务器的交互：cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-Web%E7%BC%93%E5%AD%98"><span class="nav-text">2.2.4   Web缓存</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-text">2.3  电子邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-%E4%B8%8EHTTP%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-text">2.3.2 与HTTP的对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-DNS%EF%BC%9A%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1"><span class="nav-text">2.4   DNS：因特网的目录服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-1-DNS%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="nav-text">2.4.1   DNS提供的服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-2-DNS%E5%B7%A5%E4%BD%9C%E6%9C%BA%E7%90%86%E6%A6%82%E8%BF%B0"><span class="nav-text">2.4.2   DNS工作机理概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-2-1-%E5%88%86%E5%B8%83%E5%BC%8F%E3%80%81%E5%B1%82%E6%AC%A1%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">2.4.2.1   分布式、层次数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-2-2-DNS%E7%BC%93%E5%AD%98"><span class="nav-text">2.4.2.2   DNS缓存</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-3-DNS%E8%AE%B0%E5%BD%95%E5%92%8C%E6%8A%A5%E6%96%87"><span class="nav-text">2.4.3   DNS记录和报文</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C"><span class="nav-text">2.5   内容分发网络</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
